// const size = 10;
// let d = dist(this.x, this.y, bread.x, bread.y);
import Bread from "./bread.js";

export default class PixelPigeon {
  constructor(x = 0, y = 0, size = 10) {
    let bread;
    this.x = x;
    this.y = y;
    this.size = size;
    this.speed = 10;
    bread = new Bread(0, 0, size / 35);
    this.faceLeft = false;
    this.velocityX = 0;
    this.velocityY = 0;
    this.data = [
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 4, 4, 4, 4, 4, 0, 0, 0, 0, 0, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 4, 6, 6, 6, 6, 6, 4, 0, 0, 0, 0, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 4, 6, 6, 6, 6, 6, 6, 6, 4, 0, 0, 0, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 4, 4, 6, 6, 6, 4, 4, 6, 6, 6, 4, 0, 0, 0, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 4, 6, 6, 6, 6, 6, 0, 4, 6, 6, 6, 4, 0, 0, 0, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 0, 4, 0, 0, 0, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4,
        4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 0, 1, 1, 4, 0, 0, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 4, 7,
        7, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 1, 4, 0, 0, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 4, 7, 7, 7,
        7, 7, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 6, 4, 0, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 4, 7, 7, 7, 7, 7,
        7, 7, 7, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 0, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 7, 7, 7, 7, 7, 7, 7,
        7, 7, 7, 7, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 7, 7, 7, 7, 7, 7, 7, 7,
        7, 7, 7, 7, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 7, 7, 7, 7, 7, 7, 7, 7, 7,
        7, 7, 7, 7, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,
        7, 7, 7, 7, 7, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 4, 4, 7, 7, 7, 7, 7, 7, 7, 7, 7,
        7, 7, 7, 7, 7, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 7, 7, 4, 4, 7, 7, 7, 7, 7, 7, 7, 7,
        7, 7, 7, 7, 7, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 7, 7, 7, 7, 4, 4, 7, 7, 7, 7, 7, 7, 7,
        7, 7, 7, 7, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 4, 4, 7, 7, 7, 4, 4, 7, 7, 7, 7, 7, 7,
        7, 7, 7, 7, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 7, 7, 4, 4, 7, 7, 7, 4, 4, 7, 7, 7, 7, 7,
        7, 7, 7, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 0, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 7, 7, 7, 4, 4, 7, 7, 7, 4, 4, 7, 7, 7, 7,
        7, 7, 7, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 0, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 4, 7, 7, 7, 7, 7, 4, 4, 7, 7, 7, 4, 4, 7, 7, 7,
        7, 7, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 0, 0, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 4, 5, 4, 7, 7, 7, 7, 7, 4, 4, 7, 7, 7, 4, 4, 7, 7,
        7, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 0, 0, 0, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 4, 5, 5, 5, 4, 7, 7, 7, 7, 7, 4, 4, 7, 7, 7, 4, 4, 7,
        4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 0, 0, 0, 0, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 4, 5, 5, 5, 5, 5, 4, 4, 7, 7, 7, 7, 4, 4, 7, 4, 4, 4, 4,
        6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 0, 0, 0, 0, 0, 0,
      ],
      [
        0, 0, 0, 0, 4, 5, 5, 5, 5, 5, 5, 5, 5, 4, 4, 4, 4, 4, 4, 4, 6, 6, 6, 6,
        6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 4, 0, 0, 0, 0, 0, 0, 0,
      ],
      [
        0, 0, 0, 4, 5, 5, 5, 5, 5, 5, 4, 4, 4, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,
        6, 6, 6, 6, 6, 6, 6, 4, 4, 4, 4, 0, 0, 0, 0, 0, 0, 0, 0,
      ],
      [
        0, 0, 4, 5, 5, 5, 5, 5, 4, 4, 0, 0, 0, 4, 4, 4, 4, 6, 6, 6, 6, 6, 6, 6,
        6, 6, 6, 6, 6, 6, 4, 0, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      ],
      [
        0, 4, 5, 5, 5, 4, 4, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 4, 6, 6, 6, 6, 6,
        6, 6, 6, 4, 4, 4, 0, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0,
      ],
      [
        0, 4, 4, 4, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 4, 4, 4, 4,
        4, 4, 4, 2, 2, 0, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
      ],
    ];
    this.width = this.data[0].length * this.size;
    this.height = this.data.length * this.size;
  }

  draw() {
    push();
    translate(this.x, this.y);

    if (this.faceLeft) {
      scale(-1, 1);
      translate(-this.width, 0);
    }
    for (let y in this.data) {
      for (let x in this.data[y]) {
        let pixel = this.data[y][x];
        if (pixel !== 0) {
          if (pixel === 1) {
            noStroke();
            fill(255, 207, 147);
          } else if (pixel === 2) {
            noStroke();
            fill(235, 50, 40);
          } else if (pixel === 3) {
            noStroke();
            fill(255, 10, 10);
          } else if (pixel === 4) {
            noStroke();
            fill(50, 50, 50);
          } else if (pixel === 5) {
            noStroke();
            fill(63, 57, 49);
          } else if (pixel === 6) {
            noStroke();
            fill(124, 124, 124);
          } else if (pixel === 7) {
            noStroke();
            fill(200, 190, 190);
          }

          rect(x * this.size, y * this.size, this.size, this.size);
        }
      }
    }
    pop();
  }

  move() {
    if (keyIsDown(65)) {
      // A key
      this.x -= this.speed;
      this.faceLeft = true;

      if (this.x < 0) {
        this.x = 0;
      }
      console.log("A pressed");
    }
    if (keyIsDown(68)) {
      // D key
      this.x += this.speed;
      this.faceLeft = false;

      if (this.x > 800 - 80) {
        this.x = 800 - 80;
      }
      console.log("D pressed");
    }
    if (keyIsDown(87)) {
      // W key
      this.y -= this.speed;
      if (this.y < 0) {
        this.y = 0;
      }
      console.log("W pressed");
    }
    if (keyIsDown(83)) {
      // S key
      this.y += this.speed;
      if (this.y > 800 - 60) {
        this.y = 800 - 60;
      }
      console.log("S pressed");
    }
  }

  walkShop() {
    let storeX = 700;
    let storeY = 70;
    let storeW = 50;
    let storeH = 50;

    return (
      this.x < storeX + 50 + storeW &&
      this.x + this.size * 10 > storeX &&
      this.y < storeY + 50 + storeH &&
      this.y + this.size * 10 > storeY
    );
  }

  getCollision() {
    return {
      x: this.x - this.width / 2,
      y: this.y - this.height / 2,
      width: this.width,
      height: this.height,
    };
  }
}
